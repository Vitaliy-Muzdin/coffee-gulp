"use strict";window.addEventListener("scroll",(()=>{const e=document.getElementById("header");window.pageYOffset>100?e.classList.add("header_active"):e.classList.remove("header_active")}));const email=document.getElementById("email"),formText=document.querySelector(".subscribe-form__text");document.addEventListener("change",(function(){""===email.value?formText.classList.remove("subscribe-form__text_not-active"):formText.classList.add("subscribe-form__text_not-active")})),window.onload=function(e){const t=document.querySelectorAll(".coffee-styles__item-title");let o=0;for(let e=0;e<t.length;e++){const s=t[e].offsetHeight;s>o&&(o=s)}for(let e=0;e<t.length;e++)t[e].style.height=o+"px";const s=document.querySelectorAll(".coffee-styles__item-text");let i=0;for(let e=0;e<s.length;e++){const t=s[e].offsetHeight;t>i&&(i=t)}for(let e=0;e<s.length;e++)s[e].style.height=i+"px";const n=document.querySelectorAll(".advantages__item-title");let l=0;for(let e=0;e<n.length;e++){const t=n[e].offsetHeight;t>l&&(l=t)}for(let e=0;e<n.length;e++)n[e].style.height=l+"px";const r=document.querySelectorAll(".advantages__item-text");let c=0;for(let e=0;e<r.length;e++){const t=r[e].offsetHeight;t>c&&(c=t)}for(let e=0;e<r.length;e++)r[e].style.height=c+"px";const a=document.querySelector(".reviews__content"),m=document.querySelectorAll(".reviews__item");let f=0;for(let e=0;e<m.length;e++){const t=m[e].offsetHeight;t>f&&(f=t)}for(let e=0;e<m.length;e++)a.style.height=f+"px"};const slideItem=document.querySelectorAll(".reviews__item"),pref=document.querySelector(".reviews__button-left"),next=document.querySelector(".reviews__button-right");let i=0;next.onclick=function(){slideItem[i].classList.remove("reviews__item_active"),i++,i>=slideItem.length&&(i=0),slideItem[i].classList.add("reviews__item_active")},pref.onclick=function(){slideItem[i].classList.remove("reviews__item_active"),i--,i<0&&(i=slideItem.length-1),slideItem[i].classList.add("reviews__item_active")},document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("form");function t(e){e.parentElement.classList.add("subscribe-form__email_error"),e.classList.add("subscribe-form__email_error")}e.addEventListener("submit",(async function(o){o.preventDefault(),o.stopPropagation();let s=function(){let e=0,o=document.getElementById("email");(function(e){e.parentElement.classList.remove("subscribe-form__email_error"),e.classList.remove("subscribe-form__email_error")})(o),console.log("Функция formValidation сработала"),o.classList.contains("subscribe-form__email")&&(console.log("email.classList.contains"),/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(o.value)?""===o.value?(t(o),e++):console.log("Ошибок нет - "+e):(t(o),e++));return e}(),i=new FormData(e);console.log("formData - "+i);const n=document.querySelector(".form-info__error"),l=document.querySelector(".form-info__ok"),r=document.getElementById("loading");if(0===s){r.classList.add("loading_active"),n.innerHTML="";const t=await fetch("./mail/subscribe.php",{method:"POST",body:i});if(t.ok){let o=await t.json();r.classList.remove("loading_active"),n.innerHTML="",l.innerHTML='<span class="form-info__info">'+o.message+"</span>",formText.classList.remove("subscribe-form__text_not-active"),e.reset()}else n.innerHTML='<span class="form-info__info">Ошибка - подписаться на новости не удалось</span>',r.classList.remove("loading_active"),console.log("if(response.false) - ")}else n.innerHTML='<span class="form-info__info">Заполните обязательные поля</span>',l.innerHTML=""}))}));